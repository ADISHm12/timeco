<!doctype html>
<html class="no-js" lang="zxx" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Watch shop | eCommers</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="manifest" href="site.webmanifest">
    <link rel="shortcut icon" type="image/x-icon" href="/assets/img/favicon.ico">
    <link rel="stylesheet" href="/assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="/assets/css/owl.carousel.min.css">
    <link rel="stylesheet" href="/assets/css/flaticon.css">
    <link rel="stylesheet" href="/assets/css/slicknav.css">
    <link rel="stylesheet" href="/assets/css/animate.min.css">
    <link rel="stylesheet" href="/assets/css/magnific-popup.css">
    <link rel="stylesheet" href="/assets/css/fontawesome-all.min.css">
    <link rel="stylesheet" href="/assets/css/themify-icons.css">
    <link rel="stylesheet" href="/assets/css/slick.css">
    <link rel="stylesheet" href="/assets/css/nice-select.css">
    <link rel="stylesheet" href="/assets/css/style.css">

    <style>
        .referral-section {
            border: 2px dashed #333;
            padding: 20px;
            margin-top: 20px;
            text-align: center;
        }

        .referral-box {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 2px solid #333;
            padding: 10px;
            margin-top: 10px;
        }

        button {
            cursor: pointer;
            padding: 5px 10px;
            margin-left: 10px;
            background-color: #007BFF;
            color: #FFF;
            border: none;
            border-radius: 5px;
        }

    </style>

    <style>
        .navbar {

            color: #fff;
            padding: 10px 0;
        }
        .message {
            padding: 2px;
            margin-bottom: 2px;
        }

        .message.success {
            color: rgb(54, 169, 68);
            background-color: rgb(255, 255, 255);
        }

        .message.warning {
            color: rgb(252, 248, 6);
            background-color: rgb(255, 255, 255);
        }

        .message.error {
            color: rgb(255, 0, 0);
            background-color: rgb(255, 255, 255);
        }


    </style>
    <style>
        .referral-section {
            border: 2px dashed #333;
            padding: 20px;
            margin-top: 20px;
            text-align: center;
        }

        .referral-box {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 2px solid #333;
            padding: 10px;
            margin-top: 10px;
        }

        button {
            cursor: pointer;
            padding: 5px 10px;
            margin-left: 10px;
            background-color: #007BFF;
            color: #FFF;
            border: none;
            border-radius: 5px;
        }


        .navbar {

            color: #fff;
            padding: 10px 0;
        }
        .message {
            padding: 2px;
            margin-bottom: 2px;
        }

        .message.success {
            color: rgb(54, 169, 68);
            background-color: rgb(255, 255, 255);
        }

        .message.warning {
            color: rgb(252, 248, 6);
            background-color: rgb(255, 255, 255);
        }

        .message.error {
            color: rgb(255, 0, 0);
            background-color: rgb(255, 255, 255);
        }

    </style>

</head>
<body>
<header>
<!--    <div id="preloader-active">-->
<!--        <div class="preloader d-flex align-items-center justify-content-center">-->
<!--            <div class="preloader-inner position-relative">-->
<!--                <div class="preloader-circle"></div>-->
<!--                <div class="preloader-img pere-text">-->
<!--                    <img src="/assets/img/logo/logo.png" alt="">-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
    <!-- Header Start -->
    <div class="header-area">
        <div class="main-header header-sticky">
            <div class="container-fluid">
                <div class="menu-wrapper">
                    <!-- Logo -->
                    <div class="logo">
                        <a href="index.html"><img src="/assets/img/logo/logo.png" alt=""></a>
                    </div>
                    <!-- Main-menu -->
                    <div class="main-menu d-none d-lg-block">
                        <nav>
                            <ul id="navigation">
                                <li><a th:href="@{/}">Home</a></li>
                                <li><a th:href="@{/user/products}">shop</a></li>
                                <li th:if="${not #authorization.expression('isAuthenticated()')}">
                                    <a th:href="@{/login}">Login</a>
                                </li>
                                <li><a th:href="@{/user/viewCart}">Cart</a></li>
                                <li><a th:href="@{/user/wishlist}">Wishlist</a></li>
                                <!--                                <li><a href="contact.html">Contact</a></li>-->
                            </ul>
                        </nav>
                    </div>
                    <!-- Header Right -->
                    <div class="header-right">
                        <ul>
                            <li> <a th:href="@{/pro/profile}"><span class="flaticon-user"></span></a></li>
                            <li><a th:href="@{/user/viewCart}"><span class="flaticon-shopping-cart"></span></a> </li>
                        </ul>
                    </div>
                </div>
                <!-- Mobile Menu -->
                <div class="col-12">
                    <div class="mobile_menu d-block d-lg-none"></div>
                </div>
            </div>
        </div>
    </div>
    <!-- Header End -->
</header>
<main>


<!--    <br>-->
<!--    <br>-->

    <!-- Breadcrumb Section Begin -->
<!--    <section class="breadcrumb-option">-->
<!--        <div class="container">-->
<!--            <div class="row">-->
<!--                <div class="col-lg-12">-->
<!--                    <div class="breadcrumb__text">-->
<!--                        <span style="color:#605656;font-weight: 500;font-size: 30px;">  </span>-->

<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
<!--        </div>-->
<!--    </section>-->
    <!-- Breadcrumb Section End -->

    <section style="background-color: rgba(192,194,193,0.73) ;padding-top: 30px;padding-bottom: 30px
">
        <div class="container py-5" style="background-color: #fff" >
            <div class="row">
                <div class="col-lg-4">
                    <div class="card border rounded mb-4">
                        <div class="card-body   text-center">
                            <div class="text-center mb-2 container" style="width: 150px;height: 150px; border-radius: 50%;padding: 0; overflow: hidden;">
                                <img src="/assets/img/avatar.jpg" style="height: 150px;width: 150px">

                            </div>

                            <h5 class="my-3">

                            </h5>


                            <div class="row  py-3" style="display: flex;justify-content: center">

                                <a th:href="@{/pro/userOrders}" class="btn_3 mr-1" >Orders</a>
                                <a class="btn_3 " th:href="@{/pro/addressList}">Address</a>

                                <div>
                                    <br>
                                    <br>


                                    <div class="container mt-4">
                                        <div class="card wallet-card" style="float: left; margin-top: -54px; width: 18rem;">
                                            <div class="card-header">
                                                <h3>Welcome</h3>
                                            </div>
                                            <div class="card-body" th:if="${wallet != null}" th:object="${wallet}">
                                                <div class="wallet-info">
                                                    <h3>wallet</h3>

                                                    <!-- Check if wallet is not null before displaying balance -->
                                                    <h5>Available Balance:</h5>
                                                    <h5 class="wallet-balance" th:text="${wallet.balance != null ? '₹' + wallet.getBalance() : 'N/A'}"></h5>
                                                    <!-- Another way to check and display the balance -->
                                                    <h6 th:if="${wallet.balance != null}">Available Balance: ₹<span th:text="${wallet.getBalance()}"></span></h6>
                                                    <h6 th:unless="${wallet.balance != null}">Available Balance: N/A</h6>
                                                    <a th:href="@{/pro/wallet}" href="" class="btn_3">Go To Wallet</a>
<!--                                                    <a th:href="@{/logout}" href="" class="btn_3 mt-2">Logout</a>-->
                                                </div>
                                            </div>
                                            <div th:unless="${wallet != null}">
                                                <!-- Handle the case where wallet is null -->
                                                <p>Wallet information not available</p>
                                            </div>
                                            <a th:href="@{/logout}" href="" class="btn_3 mt-2">Logout</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-8">
                    <div class="card border rounded  mb-4" th:object="${user}">
                        <div class="card-body">
                            <div class="row">
                                <div class="col-sm-3">
                                    <p class="mb-0" >Username</p>
                                </div>
                                <div class="col-sm-9">
                                    <p class="text-muted mb-0" th:text="${user.firstName}">

                                    </p>
                                </div>
                            </div>
                            <hr>
                            <div class="row">
                                <div class="col-sm-3">
                                    <p class="mb-0"  >Email</p>
                                </div>
                                <div class="col-sm-9">
                                    <p class="text-muted mb-0" th:text="${user.email}">

                                    </p>
                                </div>
                            </div>
                            <hr>
                            <div class="row">
                                <div class="col-sm-3">
                                    <p class="mb-0">Mobile</p>
                                </div>
                                <div class="col-sm-9">
                                    <p class="text-muted mb-0" th:text="${user.phoneNumber}">
                                    </p>
                                </div>
                            </div>

                        </div>
                    </div>

                    <!-- Button trigger modal -->
                    <a data-bs-toggle="modal" data-bs-target="#exampleModal" >
                        <button type="button" class="btn_3"> Edit Profile </button>
                    </a>

                    <!-- Button trigger modal -->
                    <a type="button" data-bs-toggle="modal" data-bs-target="#changepassword">
                        <a class="btn_3" th:href="@{/pro/resetPasswordProfile}"> Change Password </a>
                    </a>


<!--                    edit profile-->
                    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h3 class="modal-title fs-5" id="exampleModalLabel1">Update Profile</h3>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    <form th:action="@{/pro/updateAccount}"   th:object="${user}" method="POST" id="updateAccountForm">

                                        <div class="form-outline mb-4">
                                            <input value=""  name='username' th:field="*{firstName}" th:value="${user.firstName}" type="text" id="id_usernam" class="form-control form-control-lg" />
                                            <label class="form-label" for="form3Example3">Username</label>
                                            <span id="usernameError" style="color: rgba(255,0,24,0.73)"> </span>
                                        </div>
                                        <div class="form-outline mb-4">
                                            <input  name='lastName' value="" th:field="*{lastName}" th:value="${user.lastName}" type="text" id="form3Example3" class="form-control form-control-lg" />
                                            <label class="form-label" for="form3Example3">Last Name</label>
                                            <span id="lastnameError" style="color: rgba(255,0,24,0.73)"></span>
                                        </div>
                                        <div class="form-outline mb-4">
                                            <input  name='phoneNumber' value=""  th:field="*{phoneNumber}" th:value="${user.phoneNumber}" type="number" id="form3Example4" class="form-control form-control-lg" />
                                            <label class="form-label" for="form3Example4">Mobile</label>
                                            <span id="phoneNumberError" style="color: rgba(255,0,24,0.73)"></span>
                                        </div>
                                        <div class="d-flex justify-content-center">
                                            <button type="submit"
                                                    class="btn_3 ">Save Changes</button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="referral-section">
                        <h2>Refer and Earn</h2>
                        <div class="referral-box">
                            <span id="referralCode1" > Invite your friends to get awesome rewards!</span>
<!--                            <span id="referralCode" th:text="${user.referralCode}"> No Offer </span>-->


<!--                            <button onclick="copyReferralCode()" >Copy Code</button>-->
<!--                                <button>Invite friends</button>-->
                            <button type="button" class="btn_3" data-toggle="modal" data-target="#exampleModalCenter">
                                Invite friends
                            </button>
                            <div th:if="${successMessage}" class="alert alert-success">
                                <p th:text="${successMessage}"></p>
                            </div>
                        </div>
                        <p>Share your referral code with friends and both of you can earn rewards when they sign up!</p>
                    </div>


                    <!-- Modal -->
                    <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLongTitle">Invite Friend!</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <input id="emailInput" type="email" style="width: 350px;height: 50px">
                                    <input id="linkInput"  th:value="${link}" type="hidden" style="width: 350px;height: 50px">

                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn-secondary" data-dismiss="modal">Close</button>
                                    <button type="button" class="btn-primary" id="inviteButton">Invite </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <br>
                    <br>
                </div>
            </div>
        </div>
    </section>

    <main>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.20/dist/sweetalert2.all.min.js"></script>


    <script>
        function copyReferralCode() {
            var range = document.createRange();
            range.selectNode(document.getElementById('referralCode'));
            window.getSelection().removeAllRanges();
            window.getSelection().addRange(range);
            document.execCommand("copy");
            Swal.fire({
                icon: 'success',
                title: '',
                text: 'Successfully Copy',
                footer: '<a href="">Why do I have this issue?</a>'
            })
        }

    </script>


    <!-- Footer End-->
<footer>
    <!-- Footer Start-->
    <div class="footer-area footer-padding">
        <div class="container">
            <div class="row d-flex justify-content-between">
                <div class="col-xl-3 col-lg-3 col-md-5 col-sm-6">
                    <div class="single-footer-caption mb-50">
                        <div class="single-footer-caption mb-30">
                            <!-- logo -->
                            <div class="footer-logo">
                                <a href="index.html"><img src="../assets/img/logo/logo2_footer.png" alt=""></a>
                            </div>
                            <div class="footer-tittle">
                                <div class="footer-pera">
                                    <p>Asorem ipsum adipolor sdit amet, consectetur adipisicing elitcf sed do eiusmod tem.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-xl-2 col-lg-3 col-md-3 col-sm-5">
                    <div class="single-footer-caption mb-50">
                        <div class="footer-tittle">
                            <h4>Quick Links</h4>
                            <ul>
                                <li><a href="#">About</a></li>
                                <li><a href="#"> Offers & Discounts</a></li>
                                <li><a href="#"> Get Coupon</a></li>
                                <li><a href="#">  Contact Us</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-4 col-sm-7">
                    <div class="single-footer-caption mb-50">
                        <div class="footer-tittle">
                            <h4>New Products</h4>
                            <ul>
                                <li><a href="#">Woman Cloth</a></li>
                                <li><a href="#">Fashion Accessories</a></li>
                                <li><a href="#"> Man Accessories</a></li>
                                <li><a href="#"> Rubber made Toys</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-5 col-sm-7">
                    <div class="single-footer-caption mb-50">
                        <div class="footer-tittle">
                            <h4>Support</h4>
                            <ul>
                                <li><a href="#">Frequently Asked Questions</a></li>
                                <li><a href="#">Terms & Conditions</a></li>
                                <li><a href="#">Privacy Policy</a></li>
                                <li><a href="#">Report a Payment Issue</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Footer bottom -->
            <div class="row align-items-center">
                <div class="col-xl-7 col-lg-8 col-md-7">
                    <div class="footer-copy-right">
                        <p><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                            Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="fa fa-heart" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a>
                            <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --></p>
                    </div>
                </div>
                <div class="col-xl-5 col-lg-4 col-md-5">
                    <div class="footer-copy-right f-right">
                        <!-- social -->
                        <div class="footer-social">
                            <a href="#"><i class="fab fa-twitter"></i></a>
                            <a href="https://www.facebook.com/sai4ull"><i class="fab fa-facebook-f"></i></a>
                            <a href="#"><i class="fab fa-behance"></i></a>
                            <a href="#"><i class="fas fa-globe"></i></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Footer End-->
</footer>
<!--? Search model Begin -->
<div class="search-model-box">
    <div class="h-100 d-flex align-items-center justify-content-center">
        <div class="search-close-btn">+</div>
        <form class="search-model-form">
            <input type="text" id="search-input" placeholder="Searching key.....">
        </form>
    </div>
</div>
<!-- Search model end -->

<!-- JS here -->

<script src="/assets/js/vendor/modernizr-3.5.0.min.js"></script>
<!-- Jquery, Popper, Bootstrap -->
<script src="/assets/js/vendor/jquery-1.12.4.min.js"></script>
<script src="/assets/js/popper.min.js"></script>
<script src="/assets/js/bootstrap.min.js"></script>
<!-- Jquery Mobile Menu -->
<script src="/assets/js/jquery.slicknav.min.js"></script>

<!-- Jquery Slick , Owl-Carousel Plugins -->
<script src="/assets/js/owl.carousel.min.js"></script>
<script src="/assets/js/slick.min.js"></script>

<!-- One Page, Animated-HeadLin -->
<script src="/assets/js/wow.min.js"></script>
<script src="/assets/js/animated.headline.js"></script>
<script src="/assets/js/jquery.magnific-popup.js"></script>

<!-- Scrollup, nice-select, sticky -->
<script src="/assets/js/jquery.scrollUp.min.js"></script>
<script src="/assets/js/jquery.nice-select.min.js"></script>
<script src="/assets/js/jquery.sticky.js"></script>

<!-- contact js -->
<script src="/assets/js/contact.js"></script>
<script src="/assets/js/jquery.form.js"></script>
<script src="/assets/js/jquery.validate.min.js"></script>
<script src="/assets/js/mail-script.js"></script>
<script src="/assets/js/jquery.ajaxchimp.min.js"></script>

<!-- Jquery Plugins, main Jquery -->
<script src="/assets/js/plugins.js"></script>
<script src="/assets/js/main.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script></body>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function() {
        $('#updateAccountForm').submit(function(e) {
            e.preventDefault(); // Prevent default form submission

            // Perform form validation
            var username = $('#id_usernam').val().trim();
            var lastName = $('#form3Example3').val().trim();
            var phoneNumber = $('#form3Example4').val().trim();


            if (username === '') {
                $('#usernameError').text('Username cannot be empty');
                return false;
            } else if (username.length < 5) {
                $('#usernameError').text('Username must have at least 5 characters');
                return false;
            } else {
                $('#usernameError').text('');
            }

            if (lastName === '') {
                $('#lastnameError').text('Last name cannot be empty');
                return false;
            }  else if (username.length < 5) {
                $('#lastnameError').text('Last name must have at least 5 characters');
                return false;
            } else {
                $('#lastnameError').text('');
            }

            // Validate email
            // if (email === '') {
            //     $('#emailError').text('Email cannot be empty'); // Display error message for empty email
            //     return false; // Prevent form submission if validation fails
            // } else if (!isValidEmail(email)) {
            //     $('#emailError').text('Invalid email format'); // Display error message for invalid email format
            //     return false; // Prevent form submission if validation fails
            // } else {
            //     $('#emailError').text(''); // Clear any previous error message
            // }
            if (phoneNumber === '') {
                $('#phoneNumberError').text('Phone number cannot be empty');
                return false;
            } else if (!isValidPhoneNumber(phoneNumber)) {
                $('#phoneNumberError').text('Enter a valid 10-digit phone number');
                return false;
            } else {
                $('#phoneNumberError').text('');
            }
            // Placeholder for additional field validations

            // If all validations pass, submit the form
            this.submit();
        });

        // Function to validate email format
        // function isValidEmail(email) {
        //     var emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        //     return emailPattern.test(email);
        // }
        // function isValidEmail(email) {
        //     var emailPattern = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
        //     return emailPattern.test(email);
        // }

    });

    function isValidPhoneNumber(phoneNumber) {
        var phoneNumberPattern = /^[0-9]{10}$/;
        return phoneNumberPattern.test(phoneNumber);
    }
</script>

<script>
    function showSuccessAlert() {
        const urlParams = new URLSearchParams(window.location.search);
        const successAccount = urlParams.get('successAccount');
        const successPassword = urlParams.get('successPassword');

        if (successAccount === 'true') {
            showAlert("Account updated successfully");
        } else if (successPassword === 'true') {
            showAlert("Password reset successfully");
        }
    }

    function showAlert(message) {
        const Toast = Swal.mixin({
            toast: true,
            position: "top-end",
            showConfirmButton: false,
            timer: 3000,
            timerProgressBar: true,
            didOpen: (toast) => {
                toast.onmouseenter = Swal.stopTimer;
                toast.onmouseleave = Swal.resumeTimer;
            }
        });
        Toast.fire({
            icon: "success",
            title: message
        });
    }

    // Call the combined function when the page loads
    window.onload = function() {
        showSuccessAlert();
    };
</script>
<script>
    $(document).ready(function() {
        $('#inviteButton').click(function() {
            var email = $('#emailInput').val();
            var referralLink = $('#linkInput').val();

            $.ajax({
                type: 'POST',
                url: '/pro/invite',
                data: {
                    recipientEmail: email,
                    referralLink: referralLink
                },
                success: function(response) {
                    // alert(response);
                    const Toast = Swal.mixin({
                        toast: true,
                        position: "top-end",
                        showConfirmButton: false,
                        timer: 2000,
                        timerProgressBar: true,
                        didOpen: (toast) => {
                            toast.onmouseenter = Swal.stopTimer;
                            toast.onmouseleave = Swal.resumeTimer;
                        }
                    });
                    Toast.fire({
                        icon: "success",
                        title: "Invited successfully"
                    });
                },
                error: function(xhr, status, error) {
                    const Toast = Swal.mixin({
                        toast: true,
                        position: "top-end",
                        showConfirmButton: false,
                        timer: 3000,
                        timerProgressBar: true,
                        didOpen: (toast) => {
                            toast.onmouseenter = Swal.stopTimer;
                            toast.onmouseleave = Swal.resumeTimer;
                        }
                    });
                    Toast.fire({
                        icon: "error",
                        title: "Failed Action"
                    });
                }
            });
        });
    });
</script>

</html>